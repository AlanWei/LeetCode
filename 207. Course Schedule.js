/**
 * @param {number} numCourses
 * @param {number[][]} prerequisites
 * @return {boolean}
 */
const helper = (map, key, visited) => {
  if (map[key] === undefined) {
    return true;
  }
  for (let i = 0; i < map[key].length; i++) {
    if (visited.indexOf(map[key][i]) !== -1) {
      return false;
    }
  }
  visited.push(key);
  for (let i = 0; i < map[key].length; i++) {
    return helper(map, map[key][i], visited);
  }
}

var canFinish = function(numCourses, prerequisites) {
  const map = {};
  for (let i = 0; i < prerequisites.length; i++) {
    const prerequisite = prerequisites[i];
    const course1 = prerequisite[1];
    const course2 = prerequisite[0];
    if (map[course1] === undefined) {
      map[course1] = [];
    }
    map[course1].push(course2.toString());
  }
  const keys = Object.keys(map);

  for (let i = 0; i < keys.length; i++) {
    const currentKey = keys[i];
    if (!helper(map, currentKey, [])) {
      return false;
    }
  }

  return true;
};

console.log(canFinish(2, [[1, 0]]));
console.log(canFinish(2, [[1, 0], [0, 1]]));
console.log(canFinish(3, [[1,0],[0,2],[2,1]]));
console.log(canFinish(3, [[1,0],[2,0],[0,2]]));
console.log(canFinish(4, [[2,0],[1,0],[3,1],[3,2],[1,3]]));
console.log(canFinish(100, [[995,1232],[1232,719],[719,3],[3,656],[656,1379],[1379,616],[616,635],[635,1806],[1806,341],[341,913],[913,1273],[1273,822],[822,400],[400,463],[463,468],[468,909],[909,401],[401,342],[342,662],[662,1535],[1535,766],[766,1503],[1503,1252],[1252,1431],[1431,892],[892,335],[335,653],[653,731],[731,800],[800,506],[506,1208],[1208,1977],[1977,281],[281,276],[276,547],[547,673],[673,1124],[1124,989],[989,1380],[1380,1882],[1882,1619],[1619,1442],[1442,504],[504,1628],[1628,99],[99,1012],[1012,686],[686,406],[406,1388],[1388,877],[877,464],[464,1553],[1553,690],[690,1921],[1921,187],[187,636],[636,1905],[1905,955],[955,1932],[1932,1490],[1490,698],[698,1286],[1286,994],[994,790],[790,65],[65,1551],[1551,764],[764,1139],[1139,583],[583,1392],[1392,1566],[1566,1329],[1329,1798],[1798,929],[929,1016],[1016,830],[830,856],[856,78],[78,707],[707,277],[277,1944],[1944,1367],[1367,1226],[1226,1320],[1320,1218],[1218,1138],[1138,559],[559,845],[845,1091],[1091,1579],[1579,465], [465,1051],[1051,1509],[1509,1384],[1384,1445],[1445,985],[985,304],[304,432],[432,88],[88,195],[195,230],[230,1261],[1261,165],[165,1875],[1875,499],[499,1095],[1095,1552],[1552,502],[502,1775],[1775,208],[208,801],[801,1892],[1892,452],[452,266],[266,121],[121,1492],[1492,900],[900,1948],[1948,120],[120,1656],[1656,1160],[1160,1583],[1583,1862],[1862,1744],[1744,1064],[1064,1735],[1735,310],[310,611],[611,941],[941,95],[95,781],[781,774],[774,1428],[1428,1618],[1618,1254],[1254,58],[58,1754],[1754,138],[138,727],[727,188],[188,1528],[1528,13],[13,1183],[1183,1251],[1251,1240],[1240,1790],[1790,1586],[1586,705],[705,131],[131,449],[449,1491],[1491,1111],[1111,511],[511,328],[328,49],[49,1640],[1640,631],[631,1360],[1360,1991],[1991,1912],[1912,715],[715,15],[15,1507],[1507,1961],[1961,1556],[1556,1165],[1165,167],[167,1801],[1801,1456],[1456,1670],[1670,814],[814,1500],[1500,224],[224,546],[546,932],[932,1766],[1766,410],[410,740],[740,1253],[1253,733],[733,1348],[1348,371],[371,933],[933,1478],[1478,355],[355,595],[595,624],[624,1039],[1039,213],[213,1419],[1419,1477],[1477,577],[577,1555],[1555,60],[60,471],[471,153],[153,1081],[1081,223],[223,1271],[1271,1400],[1400,130],[130,1159],[1159,1061],[1061,47],[47,809],[809,523],[523,848],[848,1333],[1333,202],[202,1592],[1592,211],[211,105],[105,792],[792,1243],[1243,629],[629,1563],[1563,258],[258,1284],[1284,89],[89,534],[534,1169],[1169,1085],[1085,50],[50,69],[69,1632],[1632,1884],[1884,1927],[1927,1588],[1588,1239],[1239,1953],[1953,1763],[1763,1651],[1651,1518],[1518,916],[916,460],[460,1854],[1854,728],[728,1031],[1031,898],[898,112],[112,428],[428,274],[274,1151],[1151,939],[939,314],[314,150],[150,1483],[1483,1714],[1714,628],[628,1734],[1734,1700],[1700,1915],[1915,1647],[1647,1573],[1573,1038],[1038,962],[962,12],[12,1955],[1955,38],[38,946],[946,767],[767,1345],[1345,263],[263,1900],[1900,204],[204,1835],[1835,1976],[1976,1840],[1840,1075],[1075,1994],[1994,1447],[1447,1625],[1625,430],[430,1841],[1841,1325],[1325,1308],[1308,1010],[1010,899],[899,1339],[1339,588],[588,1723],[1723,1545],[1545,1990],[1990,1598],[1598,1495],[1495,1207],[1207,1767],[1767,693],[693,239],[239,1179],[1179,113],[113,828],[828,769],[769,493],[493,988],[988,1247],[1247,297],[297,998],[998,1880],[1880,542],[542,1873],[1873,815],[815,1230],[1230,851],[851,1974],[1974,603],[603,914],[914,1246],[1246,1357],[1357,1919],[1919,953],[953,710],[710,1613],[1613,694],[694,897],[897,411],[411,1381],[1381,1960],[1960,435],[435,1541],[1541,250],[250,1721],[1721,488],[488,486],[486,97],[97,262],[262,1080],[1080,343],[343,413],[413,1936],[1936,1349],[1349,872],[872,1978],[1978,1090],[1090,1843],[1843,783],[783,1606],[1606,843],[843,646],[646,1161],[1161,626],[626,356],[356,1587],[1587,1211],[1211,1105],[1105,1660],[1660,735],[735,160],[160,1561],[1561,1356],[1356,173],[173,1181],[1181,94],[94,171],[171,1283],[1283,1550],[1550,1867],[1867,403],[403,423],[423,516],[516,512],[512,439],[439,1557],[1557,322],[322,973],[973,610],[610,462],[462,554],[554,870],[870,227],[227,1593],[1593,1163],[1163,956],[956,1052],[1052,1154],[1154,1049],[1049,293],[293,936],[936,1989],[1989,1517],[1517,350],[350,808],[808,264],[264,1321],[1321,1577], [1577,1601],[1601,232],[232,997],[997,1705],[1705,958],[958,763],[763,37],[37,1053],[1053,1404],[1404,1474],[1474,1390],[1390,397],[397,1255],[1255,1493],[1493,457],[457,717],[717,1166],[1166,289],[289,447],[447,254],[254,796],[796,1393],[1393,1504],[1504,1526],[1526,515],[515,1397],[1397,1907],[1907,1920],[1920,831],[831,1178],[1178,520],[520,1747],[1747,666],[666,1695],[1695,290],[290,5],[5,161],[161,1311],[1311,233],[233,842],[842,765],[765,1918],[1918,1486],[1486,286],[286,1693],[1693,1558],[1558,1709],[1709,961],[961,768],[768,168],[168,1678],[1678,1690],[1690,405],[405,1569],[1569,1193],[1193,422],[422,1519],[1519,1857],[1857,399],[399,1117],[1117,311],[311,1473],[1473,448],[448,556],[556,826],[826,1814],[1814,1899],[1899,689],[689,390],[390,455],[455,1171],[1171,591],[591,1094],[1094,179],[179,1501],[1501,1707],[1707,617],[617,1148],[1148,299],[299,1443],[1443,1409],[1409,141],[141,1940],[1940,1425],[1425,968],[968,68],[68,685],[685,229],[229,1338],[1338,62],[62,775],[775,480],[480,1594],[1594,426],[426,1688],[1688,412],[412,1234],[1234,474],[474,1644],[1644,1987],[1987,526],[526,1508],[1508,1722],[1722,1176],[1176,1684],[1684,1889],[1889,296],[296,1290],[1290,114],[114,1724],[1724,2],[2,389],[389,1847],[1847,1909],[1909,1741],[1741,1757],[1757,1546],[1546,1002],[1002,1043],[1043,57],[57,375],[375,1315],[1315,1760],[1760,1062],[1062,1654],[1654,1266],[1266,34],[34,1399],[1399,1925],[1925,1162],[1162,284],[284,1576],[1576,1758],[1758,1260],[1260,1293],[1293,621],[621,1834],[1834,142],[142,1947],[1947,1469],[1469,1147],[1147,244],[244,1487],[1487,1391],[1391,170],[170,677],[677,1856],[1856,75],[75,1793],[1793,427],[427,1567],[1567,1626],[1626,1623],[1623,1547],[1547,1089],[1089,1926],[1926,991],[991,1997],[1997,358],[358,1902],[1902,1291],[1291,700],[700,172],[172,472],[472,1058],[1058,1946],[1946,1370],[1370,1534],[1534,1662],[1662,174],[174,1985],[1985,716],[716,1730],[1730,1699],[1699,166],[166,1003],[1003,467],[467,563],[563,1209],[1209,1227],[1227,566],[566,647],[647,584],[584,1901],[1901,1784],[1784,1717],[1717,133],[133,319],[319,197],[197,476],[476,1324],[1324,1923],[1923,535],[535,823],[823,275],[275,581],[581,1471],[1471,1334],[1334,849],[849,1177],[1177,1000],[1000,786],[786,615],[615,44],[44,245],[245,1728],[1728,72],[72,876],[876,1452],[1452,569],[569,1231],[1231,442],[442,1225],[1225,599],[599,80],[80,794],[794,1667],[1667,1543],[1543,574],[574,785],[785,883],[883,1802],[1802,651],[651,1414],[1414,363],[363,1076],[1076,469],[469,1355],[1355,885],[885,1030],[1030,758],[758,977],[977,91],[91,1217],[1217,1296],[1296,1056],[1056,625],[625,1104],[1104,377],[377,1605],[1605,1011],[1011,1332],[1332,622],[622,507],[507,1189],[1189,1352],[1352,1446],[1446,1191],[1191,937],[937,924],[924,1642],[1642,873],[873,376],[376,386],[386,440],[440,1523],[1523,1389],[1389,1274],[1274,1344],[1344,64],[64,784],[784,445],[445,648],[648,1560],[1560,655],[655,509],[509,633],[633,1077],[1077,1285],[1285,494],[494,691],[691,596],[596,85],[85,101],[101,983],[983,582],[582,1749],[1749,1106],[1106,235],[235,1303],[1303,1559],[1559,1433],[1433,803],[803,1807],[1807,1808],[1808,517],[517,578],[578,490],[490,1458],[1458,1881],[1881,1725],[1725,237],[237,1199],[1199,475],[475,1484],[1484,1776],[1776,1434],[1434,1554],[1554,684],[684,366],[366,1753],[1753,1648],[1648,1572],[1572,739],[739,1562],[1562,169],[169,620],[620,614],[614,73],[73,1496],[1496,256],[256,83],[83,1451],[1451,1164],[1164,950],[950,945],[945,1294],[1294,1532],[1532,484],[484,1499],[1499,1800],[1800,103],[103,1781],[1781,1891],[1891,1745],[1745,117],[117,963],[963,417],[417,789],[789,180],[180,316],[316,901],[901,750],[750,549],[549,1565],[1565,1895],[1895,1527],[1527,16],[16,104],[104,609],[609,1184],[1184,1059],[1059,17],[17,1578],[1578,1017],[1017,682],[682,420],[420,1299],[1299,1574],[1574,672],[672,713],[713,1677],[1677,354],[354,1652],[1652,1071],[1071,1288],[1288,1472],[1472,1022],[1022,1405],[1405,638],[638,1634],[1634,1133],[1133,1228],[1228,30],[30,433],[433,14],[14,891],[891,408],[408,1962],[1962,835],[835,1536],[1536,757],[757,1906],[1906,240],[240,1568]]));